const INPUT = `.........................#...........................................................................................................#......
..................#................................................#........................#................#..............................
...........................................................................#........................#...........................#...........
........#...................#........#......#.............#.....................#...........................................................
..........................................................................................................#........#........................
.....................#..........................#..........................................................................#................
.#...........#................................................................................................#....................#......#.
...............................#..........................................#..........#......................................................
....................................#............................#...................................#......................................
.................#.......................................................................................................#..................
.........................#.....................#.......................#........#.....................................................#.....
.....#...............................................#......................................#...............................................
..............................#..................................................................#.............#............................
#....................................#..................................................................#...................................
..........................................................#.................................................................................
......................................................................#...........................................#.........................
............#...............................................................#............................................#.............#....
....#.........................................................................................................................#.............
...................................#.....#.................................................................................................#
................................................#........................#.........#..........................#.............................
..........................#....................................#................................#...........................................
......#..............#...........................................................................................................#..........
.................................#.......................#............................#................#....................................
..................................................#..................#.....#................................................................
............#..............................#.................................................#............................#.................
..................#...............................................................#........................#.....#....................#.....
.....#......................................................................................................................................
..............................................#............#.........................................#...............#......................
..................................................................#.........................................................................
............................#..............................................................................................#.............#..
......................#..........................................................................................................#..........
.......................................................................................#....................................................
.............................................#...............................#.............................#..........................#.....
.#................#.........................................................................................................................
................................#...................................................#..........................#............................
..........#..............#........................................#................................#.....................................#..
...............................................#.......#..................................#.................................................
............................................................#...................................................................#...........
....................#.....................#................................................................................#................
............................#.....................#............................................#............................................
.............#................................................................................................#.............................
.................................................................#......................#...............#...................................
.......................................................................#.........#..................................#.......................
......#.......................#........................#....................................................................................
...................#..................................................................................................................#.....
......................................#..............................................................#...................#..................
.#............................................#................#.............#.................#................#.............#.............
............................................................................................................................................
..................................................................................#..................................#......................
.......#..............#............................................#......#...............................#.............................#...
..................................#..............#..........................................................................................
..............#..........................................#..................................................................................
...............................................................#................................................#.................#.........
.........................#...................................................#.........................................#....................
............................................................................................................................................
...#..............#................................................................................#.......................#................
.....................................................#.................................#......#.............................................
.................................#.......................................#......#..................................#........................
............................................................................................................................................
............................................................................................................................................
....................................#............#...........................#.........................#....................#...............
......#................#.........................................................................#.........................................#
........................................#..................#................................................................................
.................#......................................................................#....................#.....#.................#......
.....................................................................................................#......................................
.#.......................................................................................................................#...............#..
..............................#.................#...........................................................................................
.......#...............#...................#.........................................#.....................#.....#..........................
...................................#...........................................................#............................................
..................#................................................#............#...........................................#......#........
............................................................................................................................................
.......................................................................................................................#....................
.............................#.....................#...........................................................#...........................#
...............#....................#.............................................................#.........................................
.....#..............#..................................................................................#....................................
#..............................................#...........................#................................................#...........#...
..................................................................#.............#..........#.......................................#........
............................................................................................................................................
.........#......#..........#........................#............................................................#..........................
........................................................................................#..........#........................................
........................................#...................#........#....................................#............#....................
..............................#..................................................#..........................................................
............................................#.........................................................#.....................................
.....#........#...........#..........................................................#......................................#...............
................................................#........................#.................................................................#
.....................................#.....................#..................................................#.................#.....#.....
.#.......#.........................................................#................................#.......................................
............................................................................................................................................
...............................#...........#................................................................................................
.................................................................................................#..........#.....#.........................
......#...........#........#.......................#..............................#.................................................#.......
.........................................................................#..................................................................
...........#..................................#........................................................................#.....#..............
.......................................#......................................................................#.............................
#.....................#.........................................................................#........................................#..
.................................................................................#...................#......................................
.................................................#..............#...........#......................................................#........
................#............#.....#........................................................................................................
.....#......................................#...............................................................................................
.......................................................#.....#.........................#.........#...................#......................
................................#....................................................................................................#......
.....................#.........................................................................................#............................
............#.......................................#...............#..........#....................#.......................................
.........................................................................................#..................................................
................................................#..............................................#.......................................#....
...#......................#...............................................................................................#......#..........
...........................................................#.................#.......#......................................................
..........................................................................................................#...........#.....................
......................................#........................#.....#.......................#................................#......#......
...................#..............................................................................#.........................................
.#..........................................................................................................................................
.......................#......#...........................................#.........#...........................#..........#................
.............#...................................#....................................................#...................................#.
...................................#........#...............................................................................................
................................................................................................#...................#.......................
.................................................................................................................................#..........
.....................#......................................#................#.......#......................................................
#......#..................#..............................................................................#..............#...................
...........................................#.....................................................................#..........................
.............#......................#...........#......................................................................................#....
...................#.....................................#............#.....................................................................
.......................................................................................#.........#.....#.............#......................
...........................................................................#....................................................#...........
..................................#.............................#..............................................#............................
...............#..........#......................#..................................#.......................................#...............
........................................#...................................................................................................
...........................................................................................#............#...................................
.............................#...............................................#........................................................#.....
.............#................................#......#.........#......#............................#............#...........................
...#.....................................................................................................................#..................
.........................................................#...........................#.....................................................#
........#........................................#..................................................................#..............#........
#..........................#......#.....#................................................#..................................................
............................................................................................................................................
....................................................#........#.................................#.......................#....................
.................#..........................................................................................................................
.......................#....................#........................#.....................#...........#..........#.........................
.....#..............................#.......................................................................#................#............#.
..........................................................#...............#.................................................................
...........#.......#.....................#...........#.........#.................#.................#........................................`

const EXAMPLE = `...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#.....`

const EXPAND_BY = 1000000

const getPairs = (arr) => arr.map( (v, i) => arr.slice(i + 1).map(w => [v, w]) ).flat();

const rows = INPUT.split('\n')
let rowsToExpand = []
let columnsToExpand = []

const getNewRows = () => {
  let rowLength = 0
  rows.forEach((row, rowIndex) => {
    if (rowIndex === 0) rowLength = row.length
    if ([...new Set(row.split(''))].length === 1) rowsToExpand.push(rowIndex)
    return
  })

  let columns = []
  for (let index = 0; index < rowLength; index++) {
    columns = []
    rows.forEach(row => {
      columns.push(row[index])
    })
    if ([...new Set(columns)].length === 1) columnsToExpand.push(index)
  }

  return rows
}

const newRows = getNewRows()

let galaxyMap = []

let sumOfX = 0
let sumOfY = 0
newRows.forEach((row, rowIndex) => {
  row.split('').forEach((char, charIndex) => {
    if (char !== '.') {
      galaxyMap.push({
        x: charIndex,
        y: rowIndex
      })
    }
  })
})


const galaxies = Array.from(Array(galaxyMap.length).keys())

const pairs = getPairs(galaxies)

const getAddedX = (charIndex) => {
  return charIndex + columnsToExpand.reduce((acc, curr, index) => {
    return acc + (charIndex >= columnsToExpand[index] ? EXPAND_BY - 1 : 0)
  }, 0)
}

const getAddedY = (charIndex) => {
  return charIndex + rowsToExpand.reduce((acc, curr, index) => {
    return acc + (charIndex >= rowsToExpand[index] ? EXPAND_BY - 1 : 0)
  }, 0)
}

const shortestDistanceBetweenPairs = pairs.map(pair => {
  const firstPair = pair[0]
  const secondPair = pair[1]

  const x1 = getAddedX(galaxyMap[firstPair].x)
  const x2 = getAddedX(galaxyMap[secondPair].x)
  const y1 = getAddedY(galaxyMap[firstPair].y)
  const y2 = getAddedY(galaxyMap[secondPair].y)

  const xAdd = Math.abs(x1 - x2)
  const yAdd = Math.abs(y1 - y2)
  return (xAdd + yAdd)
})

const sum = shortestDistanceBetweenPairs.reduce((acc, curr) => acc + curr, 0)
console.log('sum: ', sum);
